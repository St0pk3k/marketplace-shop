{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî Nice luk</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="nav">
                <h1 class="logo">Nice luk</h1>
                <ul class="menu">
                    <li><a href="/">üè† –ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="/cart/">üõí –ö–æ—Ä–∑–∏–Ω–∞</a></li>
                    <li><a href="/about/">üè¢ –û –∫–æ–º–ø–∞–Ω–∏–∏</a></li>
                    {% if user.is_authenticated %}
                        <li><a href="/profile/">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a></li>
                        <li style="display: flex; align-items: center;">
                            <form method="post" action="{% url 'logout' %}" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" style="
                                    background: none;
                                    border: none;
                                    font-family: 'Segoe UI', sans-serif;
                                    font-size: 16px;
                                    font-weight: 500;
                                    color: #333;
                                    cursor: pointer;
                                    padding: 0;
                                    margin: 0;
                                ">
                                    üö™ –í—ã–π—Ç–∏
                                </button>
                            </form>
                        </li>
                    {% else %}
                        <li><a href="/accounts/login/">üîê –í–æ–π—Ç–∏</a></li>
                        <li><a href="/register/">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
                    {% endif %}
                </ul>
            </div>
        </header>

        <h2 class="title">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>

        {% if cart_items %}
            <ul>
                {% for item in cart_items %}
                    <li style="margin-bottom: 16px;">
                        <strong>{{ item.product.name }}</strong><br>
                        –¶–µ–Ω–∞: {{ item.product.price }} —Ä—É–±. √ó {{ item.quantity }} = <strong>{{ item.subtotal }} —Ä—É–±.</strong>
                        <div class="cart-actions" style="display: inline-flex; gap: 8px; margin-top: 6px;">
                            <a href="{% url 'decrease_quantity' item.product.id %}" class="btn">‚àí</a>
                            <a href="{% url 'increase_quantity' item.product.id %}" class="btn">+</a>
                            <a href="{% url 'remove_from_cart' item.product.id %}" class="btn danger">–£–¥–∞–ª–∏—Ç—å</a>
                        </div>
                    </li>
                {% endfor %}
            </ul>

            <p class="total">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: {{ total_price }} —Ä—É–±.</p>
            <a href="{% url 'checkout' %}" class="button">‚úî –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
        {% else %}
            <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.</p>
        {% endif %}

        <div class="go-to-cart">
            <a href="{% url 'product_list' %}" class="button">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ç–æ–≤–∞—Ä–∞–º</a>
        </div>

        {% include 'asort/footer.html' %}
    </div>
</body>
</html>
